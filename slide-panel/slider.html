<!DOCTYPE HTML>
<html>
<head>
<script>
/*jslint browser: true, plusplus: true, maxerr: 1000, indent: 3 */
/*global
   URLs, choose, document, effectTime, hideTopPanel, idx, jQuery, loadContent, onBottomPanelHidden, onTopPanelHidden, refreshTime, setTimeout, showTopPanel
*/
/*properties
    '-', attr, blind, bounce, clip, drop, explode, fold, hide, highlight, html,
    none, percent, puff, random, ready, scale, shake, show, slide
*/

"use strict";
var VERSION = 1;
</script>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
   <title>Slider Prototype</title>

   <link type="text/css" href="css-html5-reset/html5reset-1.6.1.css" rel="stylesheet" />
   <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
   <script src="js/jquery-1.6.2.min.js"></script>
   <script src="js/jquery-ui-1.8.16.custom.min.js"></script>

   <style>

.content {
   width: 200px;
   height: 200px;
   border: 1px solid red;
}

#panel2 {
   border: 1px solid blue;
}

#screen {
   position: absolute;
   top: 202px;
   width: 200px;
   height: 200px;
   border: 1px solid white;
   background-color: white;
}
   </style>

</head>
<body>
   <div id="frame" class="slider">

      <div id="panel1" class="content">
         <img id="img1" src="Button-Vote-Repeal.jpg"/>
      </div>

      <div id="panel2" class="content">
         <img id="img2" src="website-custom-design-38mm.jpg"/>
      </div>

   </div>
   <div id="screen">
      <h1 id="effectName"></h1>
   </div>

<script>
var idx = 0;
var effectTime = 1000;
var refreshTime = 2000;

var URLs = [
   "00467loveGlasgo.gif",
   "Button-CapitalismFairTrade_final.jpg",
   "Button-Vote-Repeal.jpg",
   "website-custom-design-38mm.jpg",
   "-"
];
URLs.pop();

var Effects = {
   'none': {},
   'blind': {},
   'bounce': {},
   'clip': {},
   'drop': {},
   'explode': {},
   'fold': {},
   'highlight': {},
   'puff': {},
//   'pulsate': {},
   'scale': { percent: 0 },
   'shake': {},
//   'size': { to: { width: 0, height: 200 } },
   'slide': {},

   '-': []
};

function initEffects() {
   var key;
   for (key in Effects) {
      if (Effects.hasOwnProperty(key) && key !== '-') {
         Effects['-'].push(key);
      }
   }
}

function choose() {
   return URLs[idx++ % URLs.length];
}

function chooseEffect() {
   return Effects['-'][Math.floor(Math.random() * Effects['-'].length)];
//   return Effects['-'][Math.floor(idx / 2) % Effects['-'].length];
}

function loadContent(id) {
   jQuery('#' + id).attr('src', choose());
}

function onTopPanelHidden() {
   loadContent('img1');
   setTimeout(function () {
      showTopPanel();
   }, refreshTime);
}

function onBottomPanelHidden() {
   loadContent('img2');
   setTimeout(function () {
      hideTopPanel();
   }, refreshTime);
}

function hideTopPanel() {
   var Options, effect = chooseEffect();
   Options = Effects[effect];
   if (typeof Options.percent !== 'undefined') {
      Options.percent = 0;
   }
   jQuery('#effectName').html(effect);
   if (effect === 'none') {
      jQuery('#panel1').hide();
      onTopPanelHidden();
   } else {
      jQuery('#panel1').hide(effect, Options, effectTime, onTopPanelHidden);
   }
}

function showTopPanel() {
   var Options, effect = chooseEffect();
   Options = Effects[effect];
   if (typeof Options.percent !== 'undefined') {
      Options.percent = 100;
   }
   jQuery('#effectName').html(effect);
   if (effect === 'none') {
      jQuery('#panel1').show();
      onBottomPanelHidden();
   } else {
      jQuery('#panel1').show(effect, Options, effectTime, onBottomPanelHidden);
   }
}

jQuery(document).ready(function () {
   initEffects();
   setTimeout(function () {
      hideTopPanel();
   }, refreshTime);
});

</script>

</body>
</html>
